"use strict";(function(){var d,o;function m(){var x=document.createElement("div");x.style.width="100%";x.style.height="100%";x.style.position="relative";x.id="linesdemo";d=document.createElement("canvas");d.style.width="100%";d.style.height="100%";d.style.backgroundColor="#000";d.mozOpaque=true;x.appendChild(d);var w=document.getElementsByTagName("script");var y=w[w.length-1];y.parentNode.insertBefore(x,y);var z=d.getBoundingClientRect();d.width=z.width||100;d.height=z.height||100;o=d.getContext("2d");window.addEventListener("resize",a,false);if(0){var v=document.createElement("button");v.innerHTML="â–¡";v.style.cssText="width:30px;height:30px;margin:10px;padding:0;position:absolute;bottom:0;right:0;background:#444;border:1px solid;border-radius:0;color:#eee;box-shadow:none;font:20px sans-serif;text-align:center;opacity:.5;-moz-user-select:none;-webkit-user-select: none";x.appendChild(v);v.addEventListener("click",function(){console.log("Enter fullscreen");d.mozRequestFullScreen()})}}function c(w,v){w=Math.ceil(w);v=Math.floor(v);return Math.floor(Math.random()*(v-w+1))+w}Array.prototype.shuffle=function(){var x=this.length,w,v;if(x==0){return this}while(--x){w=Math.floor(Math.random()*(x+1));v=this[x];this[x]=this[w];this[w]=v}return this};var s={linedensity:100,lineheight:1024,linewidth:2,tipheight:64,linespeed:10,cspeed:30,density:null,line:null,lines:null,grad:null,gradT:null,cs:null,cs2:null,cs3:null,linebatch:null,linebatchS:null,ctime:null,cup:null,linelist:[]};function e(v,B){var A=document.createElement("canvas");A.width=v;A.height=B;var w=A.getContext("2d");var z=w.createLinearGradient(0,0,0,B);z.addColorStop(0,"rgba(255,255,255,0)");z.addColorStop(1,"rgba(255,255,255,1)");w.fillStyle=z;w.fillRect(0,0,v,B);return A}function n(x){var y=d.height/2;var A=document.createElement("canvas");A.width=x;A.height=y;var v=A.getContext("2d");var z=v.createLinearGradient(0,0,0,y);z.addColorStop(0,"rgba(0,0,0,0)");z.addColorStop(1,"rgba(0,0,0,1)");v.fillStyle=z;v.fillRect(0,0,x,y);return A}function r(x){var y=d.height/4;var A=document.createElement("canvas");A.width=x;A.height=y;var v=A.getContext("2d");var z=v.createLinearGradient(0,0,0,y);z.addColorStop(0,"rgba(0,0,0,0.7)");z.addColorStop(1,"rgba(0,0,0,0)");v.fillStyle=z;v.fillRect(0,0,x,y);return A}function p(){var v=[[255,40,100],[255,255,0],[255,150,0],[150,0,255],[150,255,100],[255,0,200],[40,100,255]];v.shuffle();var w=c(3,5);v=v.slice(0,w);return v}function k(A,E,y){var z=p();var F=A.getContext("2d");F.clearRect(0,0,E,y);var B=E/(z.length-1);var C=0;var D=F.createLinearGradient(0,0,E,0);for(var v=0;v<z.length;v++){D.addColorStop(C,"rgb("+z[v][0]+","+z[v][1]+","+z[v][2]+")");C=C+((B)/E)}F.fillStyle=D;F.fillRect(0,0,E,y);return A}function u(){s.density=s.linedensity*d.width/100;while(s.linelist.length<s.density){var v={};v.x=c(0,d.width);v.y=c(0-s.lineheight,d.height);v.sp=5*Math.random()+3;v.op=c(25,255);v.tip=false;v.alpha=c(25,100)/255;if(c(1,10)==10){v.tip=true;v.alpha=220/255}s.linelist.push(v)}while(s.linelist.length>s.density){s.linelist.pop()}}function q(){s.line=e(s.linewidth,s.lineheight);s.lines=e(s.linewidth,s.tipheight);s.grad=n(d.width);s.gradT=r(d.width);s.cs=document.createElement("canvas");s.cs.width=d.width;s.cs.height=d.height;s.cs=k(s.cs,d.width,d.height);s.cs2=document.createElement("canvas");s.cs2.width=d.width;s.cs2.height=d.height;s.cs2=k(s.cs2,d.width,d.height);s.cs3=document.createElement("canvas");s.cs3.width=d.width;s.cs3.height=d.height;u();s.ctime=0;s.cup=true}function g(z){var x,w,v,y;v=d.width;y=d.height;if(z>1){z=0.01}for(x=s.linelist.length-1;x>=0;x--){w=s.linelist[x];w.y=w.y+(w.sp*s.linespeed)*z;if(w.y>y){w.y=0-s.lineheight}}if(s.cup){s.ctime=s.ctime+s.cspeed*z}else{s.ctime=s.ctime-s.cspeed*z}if(s.ctime>255){s.ctime=255;s.cup=false;s.cs=k(s.cs,v,y)}if(s.ctime<0){s.ctime=0;s.cup=true;s.cs2=k(s.cs2,v,y)}}function i(z){var x,w,A,v,y;v=d.width;y=d.height;o.fillStyle="#000";o.fillRect(0,0,v,y);for(x=s.linelist.length-1;x>=0;x--){w=s.linelist[x];o.globalAlpha=w.alpha;o.drawImage(s.line,w.x,Math.floor(w.y))}o.globalAlpha=1;A=s.cs3.getContext("2d");A.globalAlpha=1;A.drawImage(s.cs,0,0,v,y);A.globalAlpha=s.ctime/255;A.drawImage(s.cs2,0,0,v,y);o.globalCompositeOperation="multiply";o.drawImage(s.cs3,0,0,v,y);o.globalCompositeOperation="source-over";o.globalAlpha=0.6274509;for(x=s.linelist.length-1;x>=0;x--){w=s.linelist[x];if(w.tip){o.drawImage(s.lines,w.x,Math.floor(w.y)+s.lineheight-s.tipheight)}}o.globalAlpha=1;o.drawImage(s.gradT,0,0);o.drawImage(s.grad,0,y-s.grad.height)}function t(v){if(v!=s.linedensity){s.linedensity=v;u()}}function l(y){if(y!=s.lineheight){var v=s.lineheight;s.lineheight=y;if(s.lineheight<128){s.tipheight=s.lineheight/2}else{s.tipheight=64}s.line=e(s.linewidth,s.lineheight);s.lines=e(s.linewidth,s.tipheight);for(var x=0;x<s.linelist.length;x++){var w=s.linelist[x];w.y=w.y+(v-s.lineheight);if((v>y)&&(w.y>d.height)){w.y=0-s.lineheight-(w.y-d.height)}}}}function f(v){if(v<=0||v>8){return}s.linewidth=v;s.line=e(s.linewidth,s.lineheight);s.lines=e(s.linewidth,s.tipheight)}function h(v){if(v!=s.linespeed){s.linespeed=v/3}}function b(v){if(v!=s.cspeed){s.cspeed=v}}function a(){var v=d.getBoundingClientRect();d.width=v.width;d.height=v.height;q()}function j(){q();var y=Date.now();var v=0;var x=0;window.requestAnimationFrame(w);function w(z){x=z-v;v=z;if(x<0){x=0}x=x/1000;g(x);i(x);window.requestAnimationFrame(w)}}m();j()})();